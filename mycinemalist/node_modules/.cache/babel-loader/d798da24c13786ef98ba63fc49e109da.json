{"ast":null,"code":"import { __assign, __spreadArrays } from \"tslib\";\nimport * as React from 'react';\nimport { useConst, usePrevious } from '@uifabric/react-hooks';\nimport { mergeAriaAttributeValues } from '../../Utilities';\nimport { KeytipManager, mergeOverflows, sequencesToID, getAriaDescribedBy } from '../../utilities/keytips/index';\n/**\n * Hook that creates attributes for components which are enabled with Keytip.\n */\n\nexport function useKeytipData(options) {\n  var _a, _b;\n\n  var uniqueId = React.useRef();\n  var keytipProps = options.keytipProps ? __assign({\n    disabled: options.disabled\n  }, options.keytipProps) : undefined;\n  var keytipManager = useConst(KeytipManager.getInstance());\n  React.useEffect(function () {\n    // Register Keytip in KeytipManager\n    if (keytipProps) {\n      uniqueId.current = keytipManager.register(keytipProps);\n    }\n\n    return function () {\n      // Unregister Keytip in KeytipManager\n      keytipProps && keytipManager.unregister(keytipProps, uniqueId.current);\n    }; // this is meant to run only at mount, and updates are handled separately\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var prevOptions = usePrevious(options);\n\n  if (uniqueId.current && keytipProps && (((_a = prevOptions) === null || _a === void 0 ? void 0 : _a.keytipProps) !== options.keytipProps || ((_b = prevOptions) === null || _b === void 0 ? void 0 : _b.disabled) !== options.disabled)) {\n    keytipManager.update(keytipProps, uniqueId.current);\n  }\n\n  var nativeKeytipProps = {\n    ariaDescribedBy: undefined,\n    keytipId: undefined\n  };\n\n  if (keytipProps) {\n    nativeKeytipProps = getKeytipData(keytipManager, keytipProps, options.ariaDescribedBy);\n  }\n\n  return nativeKeytipProps;\n}\n/**\n * Gets the aria- and data- attributes to attach to the component\n * @param keytipProps - options for Keytip\n * @param describedByPrepend - ariaDescribedBy value to prepend\n */\n\nfunction getKeytipData(keytipManager, keytipProps, describedByPrepend) {\n  // Add the parent overflow sequence if necessary\n  var newKeytipProps = keytipManager.addParentOverflow(keytipProps); // Construct aria-describedby and data-ktp-id attributes\n\n  var ariaDescribedBy = mergeAriaAttributeValues(describedByPrepend, getAriaDescribedBy(newKeytipProps.keySequences));\n\n  var keySequences = __spreadArrays(newKeytipProps.keySequences);\n\n  if (newKeytipProps.overflowSetSequence) {\n    keySequences = mergeOverflows(keySequences, newKeytipProps.overflowSetSequence);\n  }\n\n  var keytipId = sequencesToID(keySequences);\n  return {\n    ariaDescribedBy: ariaDescribedBy,\n    keytipId: keytipId\n  };\n}","map":{"version":3,"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,uBAAtC;AACA,SAASC,wBAAT,QAAyC,iBAAzC;AAGA,SAASC,aAAT,EAAwBC,cAAxB,EAAwCC,aAAxC,EAAuDC,kBAAvD,QAAiF,+BAAjF;AAOA;;;;AAGA,OAAM,SAAUC,aAAV,CAAwBC,OAAxB,EAAkD;;;AACtD,MAAMC,QAAQ,GAAGV,KAAK,CAACW,MAAN,EAAjB;AACA,MAAMC,WAAW,GAA6BH,OAAO,CAACG,WAAR,GAC3CC;AACGC,YAAQ,EAAEL,OAAO,CAACK;AADrB,KAEML,OAAO,CAACG,WAFd,CAD2C,GAK1CG,SALJ;AAOA,MAAMC,aAAa,GAAGf,QAAQ,CAAgBG,aAAa,CAACa,WAAd,EAAhB,CAA9B;AAEAjB,OAAK,CAACkB,SAAN,CAAgB;AACd;AACA,QAAIN,WAAJ,EAAiB;AACfF,cAAQ,CAACS,OAAT,GAAmBH,aAAa,CAACI,QAAd,CAAuBR,WAAvB,CAAnB;AACD;;AAED,WAAO;AACL;AACAA,iBAAW,IAAII,aAAa,CAACK,UAAd,CAAyBT,WAAzB,EAAsCF,QAAQ,CAACS,OAA/C,CAAf;AACD,KAHD,CANc,CAUd;AACA;AACD,GAZD,EAYG,EAZH;AAcA,MAAMG,WAAW,GAAGpB,WAAW,CAACO,OAAD,CAA/B;;AAEA,MACEC,QAAQ,CAACS,OAAT,IACAP,WADA,KAEC,wBAAW,IAAX,IAAWW,aAAX,GAAW,MAAX,GAAWA,GAAEX,WAAb,MAA6BH,OAAO,CAACG,WAArC,IAAoD,wBAAW,IAAX,IAAWY,aAAX,GAAW,MAAX,GAAWA,GAAEV,QAAb,MAA0BL,OAAO,CAACK,QAFvF,CADF,EAIE;AACAE,iBAAa,CAACS,MAAd,CAAqBb,WAArB,EAAkCF,QAAQ,CAACS,OAA3C;AACD;;AAED,MAAIO,iBAAiB,GAAgB;AACnCC,mBAAe,EAAEZ,SADkB;AAEnCa,YAAQ,EAAEb;AAFyB,GAArC;;AAKA,MAAIH,WAAJ,EAAiB;AACfc,qBAAiB,GAAGG,aAAa,CAACb,aAAD,EAAgBJ,WAAhB,EAA6BH,OAAO,CAACkB,eAArC,CAAjC;AACD;;AAED,SAAOD,iBAAP;AACD;AAED;;;;;;AAKA,SAASG,aAAT,CACEb,aADF,EAEEJ,WAFF,EAGEkB,kBAHF,EAG6B;AAE3B;AACA,MAAMC,cAAc,GAAGf,aAAa,CAACgB,iBAAd,CAAgCpB,WAAhC,CAAvB,CAH2B,CAK3B;;AACA,MAAMe,eAAe,GAAGxB,wBAAwB,CAC9C2B,kBAD8C,EAE9CvB,kBAAkB,CAACwB,cAAc,CAACE,YAAhB,CAF4B,CAAhD;;AAKA,MAAIA,YAAY,kBAAOF,cAAc,CAACE,YAAtB,CAAhB;;AACA,MAAIF,cAAc,CAACG,mBAAnB,EAAwC;AACtCD,gBAAY,GAAG5B,cAAc,CAAC4B,YAAD,EAAeF,cAAc,CAACG,mBAA9B,CAA7B;AACD;;AACD,MAAMN,QAAQ,GAAGtB,aAAa,CAAC2B,YAAD,CAA9B;AAEA,SAAO;AACLN,mBAAe,iBADV;AAELC,YAAQ;AAFH,GAAP;AAID","names":["React","useConst","usePrevious","mergeAriaAttributeValues","KeytipManager","mergeOverflows","sequencesToID","getAriaDescribedBy","useKeytipData","options","uniqueId","useRef","keytipProps","__assign","disabled","undefined","keytipManager","getInstance","useEffect","current","register","unregister","prevOptions","_a","_b","update","nativeKeytipProps","ariaDescribedBy","keytipId","getKeytipData","describedByPrepend","newKeytipProps","addParentOverflow","keySequences","overflowSetSequence"],"sources":["D:\\PFCJACOBO\\PFC\\mycinemalist\\node_modules\\office-ui-fabric-react\\lib\\components\\src\\components\\KeytipData\\useKeytipData.ts"],"sourcesContent":["import * as React from 'react';\nimport { useConst, usePrevious } from '@uifabric/react-hooks';\nimport { mergeAriaAttributeValues } from '../../Utilities';\nimport { KeytipDataOptions } from './KeytipData.types';\nimport { IKeytipProps } from '../../Keytip';\nimport { KeytipManager, mergeOverflows, sequencesToID, getAriaDescribedBy } from '../../utilities/keytips/index';\n\nexport interface IKeytipData {\n  ariaDescribedBy: string | undefined;\n  keytipId: string | undefined;\n}\n\n/**\n * Hook that creates attributes for components which are enabled with Keytip.\n */\nexport function useKeytipData(options: KeytipDataOptions): IKeytipData {\n  const uniqueId = React.useRef<string>();\n  const keytipProps: IKeytipProps | undefined = options.keytipProps\n    ? {\n        disabled: options.disabled,\n        ...options.keytipProps,\n      }\n    : undefined;\n\n  const keytipManager = useConst<KeytipManager>(KeytipManager.getInstance());\n\n  React.useEffect(() => {\n    // Register Keytip in KeytipManager\n    if (keytipProps) {\n      uniqueId.current = keytipManager.register(keytipProps);\n    }\n\n    return () => {\n      // Unregister Keytip in KeytipManager\n      keytipProps && keytipManager.unregister(keytipProps, uniqueId.current!);\n    };\n    // this is meant to run only at mount, and updates are handled separately\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const prevOptions = usePrevious(options);\n\n  if (\n    uniqueId.current &&\n    keytipProps &&\n    (prevOptions?.keytipProps !== options.keytipProps || prevOptions?.disabled !== options.disabled)\n  ) {\n    keytipManager.update(keytipProps, uniqueId.current);\n  }\n\n  let nativeKeytipProps: IKeytipData = {\n    ariaDescribedBy: undefined,\n    keytipId: undefined,\n  };\n\n  if (keytipProps) {\n    nativeKeytipProps = getKeytipData(keytipManager, keytipProps, options.ariaDescribedBy);\n  }\n\n  return nativeKeytipProps;\n}\n\n/**\n * Gets the aria- and data- attributes to attach to the component\n * @param keytipProps - options for Keytip\n * @param describedByPrepend - ariaDescribedBy value to prepend\n */\nfunction getKeytipData(\n  keytipManager: KeytipManager,\n  keytipProps: IKeytipProps,\n  describedByPrepend?: string,\n): IKeytipData {\n  // Add the parent overflow sequence if necessary\n  const newKeytipProps = keytipManager.addParentOverflow(keytipProps);\n\n  // Construct aria-describedby and data-ktp-id attributes\n  const ariaDescribedBy = mergeAriaAttributeValues(\n    describedByPrepend,\n    getAriaDescribedBy(newKeytipProps.keySequences),\n  )!;\n\n  let keySequences = [...newKeytipProps.keySequences];\n  if (newKeytipProps.overflowSetSequence) {\n    keySequences = mergeOverflows(keySequences, newKeytipProps.overflowSetSequence);\n  }\n  const keytipId = sequencesToID(keySequences);\n\n  return {\n    ariaDescribedBy,\n    keytipId,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}