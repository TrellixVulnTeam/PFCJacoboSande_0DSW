{"ast":null,"code":"var _jsxFileName = \"D:\\\\PFCJACOBO\\\\PFC\\\\mycinemalist\\\\src\\\\components\\\\Detail.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Comment } from \"../common/Comment\";\nimport commonStyles from \"../common/common.module.scss\";\nimport \"../../node_modules/jquery/dist/jquery.min.js\";\nimport { Stack } from \"office-ui-fabric-react\";\nimport 'datatables.net';\nimport 'datatables.net-responsive';\nimport 'datatables.net-buttons';\nimport 'datatables.net-select';\nimport 'datatables.net-buttons/js/buttons.html5';\nimport 'datatables.net-buttons/js/buttons.print';\nimport NewComment from \"./NewComment\";\nimport ShowComment from \"./ShowComment\";\nimport { CircularProgress } from \"@material-ui/core\";\n\nfunction Detail(props) {\n  _s();\n\n  const [rating, setRating] = useState(props.location.state.item.rating);\n  const [loading, setLoading] = useState(true);\n  const [commentData, setCommentData] = useState({});\n  const dataComment = {};\n  useEffect(() => {\n    setLoading(true);\n    loadComments();\n  }, []);\n  useEffect(() => {\n    window.setTimeout(() => {\n      setLoading(false);\n    }, 500);\n  }, [loading]);\n\n  const loadComments = async () => {\n    let comments;\n    console.log(\"getcomments\"); // Mañana cambiar los comentarios de sitio.\n\n    const comentarios = await fetch(`http://localhost:8080/getAllComments.php`, {\n      mode: \"cors\"\n    });\n    comments = await comentarios.json();\n    comments.map(item => {\n      var comment = new Comment(item);\n      dataComment[comment.id] = comment;\n      return true;\n    });\n    setCommentData(dataComment);\n  };\n\n  if (loading) return /*#__PURE__*/React.createElement(Stack, {\n    style: {\n      width: \"100%\",\n      marginTop: \"150px\"\n    },\n    horizontal: true,\n    horizontalAlign: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"inherit\",\n    size: \"100px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 34\n    }\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Stack, {\n    style: {\n      width: \"90%\",\n      margin: \"0 auto\",\n      marginTop: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, \"Comentarios\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: \"30px\",\n      width: \"100%\",\n      border: \"1px solid black\",\n      marginBottom: \"20px\"\n    },\n    className: commonStyles.contentCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(NewComment, {\n    submit: (comment, rating) => {\n      props.submit(comment, rating, props.location.state.item.id, window.localStorage.getItem('id'), props.location.state.item.title);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"100%\",\n      margin: \"0 auto\",\n      marginTop: \"30px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 29\n    }\n  }, Object.entries(commentData).map(_ref => {\n    let [key, value] = _ref;\n    return /*#__PURE__*/React.createElement(ShowComment, {\n      content_id: props.location.state.item.id,\n      key: key,\n      item: value,\n      clickUser: id => {\n        props.clickUser(id);\n      },\n      users: props.users,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 37\n      }\n    });\n  })))));\n}\n\n_s(Detail, \"qEqinOQRrnJY6voxOIG+BLqUXMA=\");\n\n_c = Detail;\nexport default Detail;\n\nvar _c;\n\n$RefreshReg$(_c, \"Detail\");","map":{"version":3,"names":["React","useEffect","useState","Comment","commonStyles","Stack","NewComment","ShowComment","CircularProgress","Detail","props","rating","setRating","location","state","item","loading","setLoading","commentData","setCommentData","dataComment","loadComments","window","setTimeout","comments","console","log","comentarios","fetch","mode","json","map","comment","id","width","marginTop","margin","padding","border","marginBottom","contentCard","submit","localStorage","getItem","title","Object","entries","key","value","clickUser","users"],"sources":["D:/PFCJACOBO/PFC/mycinemalist/src/components/Detail.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { User } from \"../common/User\";\r\nimport { Content } from \"../common/Content\";\r\nimport { Comment } from \"../common/Comment\";\r\n\r\nimport Consts from \"../Consts\";\r\nimport commonStyles from \"../common/common.module.scss\";\r\nimport * as $ from 'jquery';\r\nimport ReactDOM from \"react-dom\";\r\nimport \"../../node_modules/jquery/dist/jquery.min.js\";\r\nimport {\r\n    Stack,\r\n    PrimaryButton,\r\n    TextField,\r\n    IIconProps,\r\n    Modal,\r\n    IconButton,\r\n    Label,\r\n    DayOfWeek,\r\n    DatePicker,\r\n    ComboBox,\r\n    IComboBoxOption,\r\n    Spinner,\r\n    SpinnerSize,\r\n    PivotItem,\r\n    Pivot,\r\n    Dropdown,\r\n    IDropdownStyles,\r\n    IDropdownOption,\r\n    IContextualMenuItem,\r\n    getIconClassName,\r\n    initializeIcons,\r\n    Rating,\r\n} from \"office-ui-fabric-react\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nimport 'datatables.net';\r\nimport 'datatables.net-responsive';\r\nimport 'datatables.net-buttons';\r\nimport 'datatables.net-select';\r\nimport 'datatables.net-buttons/js/buttons.html5';\r\nimport 'datatables.net-buttons/js/buttons.print';\r\nimport ContentCard from \"./ContentCard\";\r\nimport { getLeadingCommentRanges } from \"typescript\";\r\nimport { common } from \"@material-ui/core/colors\";\r\nimport NewComment from \"./NewComment\";\r\nimport ShowComment from \"./ShowComment\";\r\nimport { Accordion, AccordionDetails, AccordionSummary, CircularProgress, Typography } from \"@material-ui/core\";\r\n\r\n\r\n\r\nfunction Detail(props) {\r\n\r\n    const [rating, setRating] = useState(props.location.state.item.rating);\r\n    const [loading, setLoading] = useState(true);\r\n    const [commentData, setCommentData] = useState({})\r\n\r\n    const dataComment: {\r\n        [key: number]: Comment;\r\n    } = {};\r\n\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        loadComments();\r\n\r\n    }, [])\r\n    useEffect(() => {\r\n        window.setTimeout(() => {\r\n            setLoading(false);\r\n\r\n        }, 500);\r\n\r\n    }, [loading]);\r\n\r\n    const loadComments = async () => {\r\n        let comments;\r\n        console.log(\"getcomments\");\r\n        // Mañana cambiar los comentarios de sitio.\r\n        const comentarios = await fetch(`http://localhost:8080/getAllComments.php`, {\r\n            mode: \"cors\",\r\n        });\r\n        comments = await comentarios.json();\r\n        comments.map((item) => {\r\n            var comment = new Comment(item);\r\n            dataComment[comment.id] = comment;\r\n            return true;\r\n        });\r\n        setCommentData(dataComment);\r\n    }\r\n\r\n    if (loading) return <Stack\r\n        style={{ width: \"100%\", marginTop: \"150px\" }}\r\n        horizontal\r\n        horizontalAlign='center'><CircularProgress color=\"inherit\" size=\"100px\" /></Stack>\r\n        ;\r\n\r\n    return (\r\n        <>\r\n            {/* <Stack\r\n                horizontal\r\n                horizontalAlign=\"space-evenly\"\r\n                style={{ width: \"90%\", margin: \"0 auto\" }}\r\n            >\r\n                <div\r\n                    style={{ padding: \"30px\", width: \"30%\", border: \"1px solid black\", margin: \"5px\" }}\r\n                    className={commonStyles.contentCard}>\r\n                    <img style={{ width: \"100%\", minHeight: \"350px\", objectFit: \"cover\", display: \"block\" }} src={props.location.state.item.image} alt=\"\" />\r\n                    <Stack\r\n                        horizontal\r\n                        horizontalAlign=\"center\"\r\n                        style={{ marginTop: \"30px\" }}\r\n                    >\r\n                        <Rating\r\n                            min={0}\r\n                            max={5}\r\n                            rating={rating}\r\n                            readOnly\r\n                            ariaLabelFormat=\"{0} of {1} stars\"\r\n                        />\r\n                    </Stack>\r\n                </div>\r\n                <div\r\n                    style={{ padding: \"30px\", width: \"70%\", border: \"1px solid black\", margin: \"5px\" }}\r\n                    className={commonStyles.contentCard}>\r\n                    <span style={{ display: \"block\", marginBottom: \"15px\" }}>\r\n                        <span className={commonStyles.detailLabel}>Título:</span> <span className={commonStyles.detailField}>{\" \" + props.location.state.item.title}</span>\r\n                        <span className={commonStyles.detailLabel}>Plataforma:</span> <span className={commonStyles.detailField}>{\" \" + props.location.state.item.platform}</span>\r\n                    </span>\r\n                    <hr />\r\n                    <span style={{ display: \"block\", marginBottom: \"15px\" }}>\r\n                        <span className={commonStyles.detailLabel}>Géneros:</span> <span className={commonStyles.detailField}>{\" \" + props.location.state.item.genre}</span>\r\n                        <span className={commonStyles.detailLabel}>Año:</span> <span className={commonStyles.detailField}>{\" \" + props.location.state.item.year}</span>\r\n                    </span>\r\n                    <hr />\r\n\r\n                    <span style={{ display: \"block\", marginBottom: \"15px\" }}>\r\n                        <span className={commonStyles.detailLabel}>Director:</span> <span className={commonStyles.detailField}>{\" \" + props.location.state.item.director}</span>\r\n                        <span className={commonStyles.detailLabel}>Tipo de contenido:</span> <span className={commonStyles.detailField}>{\" \" + props.location.state.item.content_type}</span>\r\n                    </span>\r\n                    <hr />\r\n                    <span style={{ display: \"block\", marginBottom: \"15px\" }}>\r\n                        <span className={commonStyles.detailLabel}>Actores principales:</span> <span className={commonStyles.detailField}>{\" \" + props.location.state.item.leading_cast}</span>\r\n                    </span>\r\n                    <hr />\r\n                    <span style={{ display: \"block\" }}>\r\n                        <span className={commonStyles.detailLabel}>Sinopsis:</span> <span className={commonStyles.detailField}>{\" \" + props.location.state.item.sinopsis}</span>\r\n                    </span>\r\n                </div>\r\n\r\n\r\n            </Stack> */}\r\n\r\n            <Stack style={{ width: \"90%\", margin: \"0 auto\", marginTop: \"30px\" }}>\r\n                <h2>Comentarios</h2>\r\n\r\n                <div\r\n                    style={{\r\n                        padding: \"30px\",\r\n                        width: \"100%\",\r\n                        border: \"1px solid black\",\r\n                        marginBottom: \"20px\"\r\n\r\n                    }}\r\n                    className={commonStyles.contentCard}\r\n                >\r\n                    <NewComment\r\n                        submit={(comment, rating) => {\r\n                            props.submit(comment, rating, props.location.state.item.id, window.localStorage.getItem('id'), props.location.state.item.title);\r\n                        }}\r\n                    />\r\n                    {/* <Accordion>\r\n                        <AccordionSummary\r\n                            // expandIcon={<ExpandMoreIcon />}\r\n                            aria-controls=\"panel1a-content\"\r\n                            id=\"panel1a-header\"\r\n                        >\r\n                            <Typography>Mostrar comentarios</Typography>\r\n                        </AccordionSummary>\r\n                        <AccordionDetails> */}\r\n                            <div\r\n\r\n                                style={{ width: \"100%\", margin: \"0 auto\", marginTop: \"30px\" }}>\r\n                                {Object.entries(commentData).map(([key, value]) => (\r\n                                    <ShowComment\r\n                                        content_id={props.location.state.item.id}\r\n                                        key={key}\r\n                                        item={value}\r\n                                        clickUser={(id) => {\r\n                                            props.clickUser(id);\r\n                                        }}\r\n                                        users={props.users}\r\n                                    />\r\n                                ))}\r\n                            </div>\r\n                        {/* </AccordionDetails>\r\n                    </Accordion> */}\r\n\r\n                  \r\n                </div>\r\n\r\n            </Stack>\r\n\r\n        </>\r\n\r\n\r\n    );\r\n}\r\n\r\n\r\nexport default Detail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}