{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { composeRenderFunction, classNamesFunction, getRTL, getRTLSafeKeyCode, KeyCodes } from '../../Utilities';\nimport { SelectionMode } from '../../utilities/selection/index';\nimport { Check } from '../../Check';\nimport { Icon } from '../../Icon';\nimport { GroupSpacer } from './GroupSpacer';\nimport { Spinner } from '../../Spinner';\nvar getClassNames = classNamesFunction();\n\nvar GroupHeaderBase =\n/** @class */\nfunction (_super) {\n  __extends(GroupHeaderBase, _super);\n\n  function GroupHeaderBase(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._toggleCollapse = function () {\n      var _a = _this.props,\n          group = _a.group,\n          onToggleCollapse = _a.onToggleCollapse,\n          isGroupLoading = _a.isGroupLoading;\n      var isCollapsed = _this.state.isCollapsed;\n      var newCollapsed = !isCollapsed;\n      var newLoadingVisible = !newCollapsed && isGroupLoading && isGroupLoading(group);\n\n      _this.setState({\n        isCollapsed: newCollapsed,\n        isLoadingVisible: newLoadingVisible\n      });\n\n      if (onToggleCollapse) {\n        onToggleCollapse(group);\n      }\n    };\n\n    _this._onKeyUp = function (ev) {\n      var _a = _this.props,\n          group = _a.group,\n          onGroupHeaderKeyUp = _a.onGroupHeaderKeyUp;\n\n      if (onGroupHeaderKeyUp) {\n        onGroupHeaderKeyUp(ev, group);\n      }\n\n      if (!ev.defaultPrevented) {\n        var shouldOpen = _this.state.isCollapsed && ev.which === getRTLSafeKeyCode(KeyCodes.right, _this.props.theme);\n        var shouldClose = !_this.state.isCollapsed && ev.which === getRTLSafeKeyCode(KeyCodes.left, _this.props.theme);\n\n        if (shouldClose || shouldOpen) {\n          _this._toggleCollapse();\n\n          ev.stopPropagation();\n          ev.preventDefault();\n        }\n      }\n    };\n\n    _this._onToggleClick = function (ev) {\n      _this._toggleCollapse();\n\n      ev.stopPropagation();\n      ev.preventDefault();\n    };\n\n    _this._onToggleSelectGroupClick = function (ev) {\n      var _a = _this.props,\n          onToggleSelectGroup = _a.onToggleSelectGroup,\n          group = _a.group;\n\n      if (onToggleSelectGroup) {\n        onToggleSelectGroup(group);\n      }\n\n      ev.preventDefault();\n      ev.stopPropagation();\n    };\n\n    _this._onHeaderClick = function () {\n      var _a = _this.props,\n          group = _a.group,\n          onGroupHeaderClick = _a.onGroupHeaderClick,\n          onToggleSelectGroup = _a.onToggleSelectGroup;\n\n      if (onGroupHeaderClick) {\n        onGroupHeaderClick(group);\n      } else if (onToggleSelectGroup) {\n        onToggleSelectGroup(group);\n      }\n    };\n\n    _this._onRenderTitle = function (props) {\n      var group = props.group,\n          ariaColSpan = props.ariaColSpan;\n\n      if (!group) {\n        return null;\n      }\n\n      return React.createElement(\"div\", {\n        className: _this._classNames.title,\n        role: \"gridcell\",\n        \"aria-colspan\": ariaColSpan\n      }, React.createElement(\"span\", null, group.name), React.createElement(\"span\", {\n        className: _this._classNames.headerCount\n      }, \"(\", group.count, group.hasMoreData && '+', \")\"));\n    };\n\n    _this.state = {\n      isCollapsed: _this.props.group && _this.props.group.isCollapsed,\n      isLoadingVisible: false\n    };\n    return _this;\n  }\n\n  GroupHeaderBase.getDerivedStateFromProps = function (nextProps, previousState) {\n    if (nextProps.group) {\n      var newCollapsed = nextProps.group.isCollapsed;\n      var isGroupLoading = nextProps.isGroupLoading;\n      var newLoadingVisible = !newCollapsed && isGroupLoading && isGroupLoading(nextProps.group);\n      return __assign(__assign({}, previousState), {\n        isCollapsed: newCollapsed || false,\n        isLoadingVisible: newLoadingVisible || false\n      });\n    }\n\n    return previousState;\n  };\n\n  GroupHeaderBase.prototype.render = function () {\n    var _a = this.props,\n        group = _a.group,\n        _b = _a.groupLevel,\n        groupLevel = _b === void 0 ? 0 : _b,\n        viewport = _a.viewport,\n        selectionMode = _a.selectionMode,\n        loadingText = _a.loadingText,\n        // eslint-disable-next-line deprecation/deprecation\n    _c = _a.isSelected,\n        // eslint-disable-next-line deprecation/deprecation\n    isSelected = _c === void 0 ? false : _c,\n        _d = _a.selected,\n        selected = _d === void 0 ? false : _d,\n        indentWidth = _a.indentWidth,\n        _e = _a.onRenderTitle,\n        onRenderTitle = _e === void 0 ? this._onRenderTitle : _e,\n        onRenderGroupHeaderCheckbox = _a.onRenderGroupHeaderCheckbox,\n        _f = _a.isCollapsedGroupSelectVisible,\n        isCollapsedGroupSelectVisible = _f === void 0 ? true : _f,\n        expandButtonProps = _a.expandButtonProps,\n        expandButtonIcon = _a.expandButtonIcon,\n        selectAllButtonProps = _a.selectAllButtonProps,\n        theme = _a.theme,\n        styles = _a.styles,\n        className = _a.className,\n        compact = _a.compact,\n        ariaPosInSet = _a.ariaPosInSet,\n        ariaSetSize = _a.ariaSetSize,\n        useFastIcons = _a.useFastIcons;\n    var defaultCheckboxRender = useFastIcons ? this._fastDefaultCheckboxRender : this._defaultCheckboxRender;\n    var onRenderCheckbox = onRenderGroupHeaderCheckbox ? composeRenderFunction(onRenderGroupHeaderCheckbox, defaultCheckboxRender) : defaultCheckboxRender;\n    var _g = this.state,\n        isCollapsed = _g.isCollapsed,\n        isLoadingVisible = _g.isLoadingVisible;\n    var canSelectGroup = selectionMode === SelectionMode.multiple;\n    var isSelectionCheckVisible = canSelectGroup && (isCollapsedGroupSelectVisible || !(group && group.isCollapsed));\n    var currentlySelected = selected || isSelected;\n    var isRTL = getRTL(theme);\n    this._classNames = getClassNames(styles, {\n      theme: theme,\n      className: className,\n      selected: currentlySelected,\n      isCollapsed: isCollapsed,\n      compact: compact\n    });\n\n    if (!group) {\n      return null;\n    }\n\n    return React.createElement(\"div\", {\n      className: this._classNames.root,\n      style: viewport ? {\n        minWidth: viewport.width\n      } : {},\n      onClick: this._onHeaderClick,\n      role: \"row\",\n      \"aria-setsize\": ariaSetSize,\n      \"aria-posinset\": ariaPosInSet,\n      \"data-is-focusable\": true,\n      onKeyUp: this._onKeyUp,\n      \"aria-label\": group.ariaLabel || group.name,\n      \"aria-expanded\": !this.state.isCollapsed,\n      \"aria-level\": groupLevel + 1\n    }, React.createElement(\"div\", {\n      className: this._classNames.groupHeaderContainer,\n      role: \"presentation\"\n    }, isSelectionCheckVisible ? React.createElement(\"div\", {\n      role: \"gridcell\"\n    }, React.createElement(\"button\", __assign({\n      \"data-is-focusable\": false,\n      type: \"button\",\n      className: this._classNames.check,\n      role: \"checkbox\",\n      \"aria-checked\": currentlySelected,\n      \"data-selection-toggle\": true,\n      onClick: this._onToggleSelectGroupClick\n    }, selectAllButtonProps), onRenderCheckbox({\n      checked: currentlySelected,\n      theme: theme\n    }, onRenderCheckbox))) : selectionMode !== SelectionMode.none && React.createElement(GroupSpacer, {\n      indentWidth: indentWidth,\n      count: 1\n    }), React.createElement(GroupSpacer, {\n      indentWidth: indentWidth,\n      count: groupLevel\n    }), React.createElement(\"div\", {\n      className: this._classNames.dropIcon,\n      role: \"presentation\"\n    }, React.createElement(Icon, {\n      iconName: \"Tag\"\n    })), React.createElement(\"div\", {\n      role: \"gridcell\"\n    }, React.createElement(\"button\", __assign({\n      \"data-is-focusable\": false,\n      type: \"button\",\n      className: this._classNames.expand,\n      onClick: this._onToggleClick,\n      \"aria-expanded\": !this.state.isCollapsed\n    }, expandButtonProps), React.createElement(Icon, {\n      className: this._classNames.expandIsCollapsed,\n      iconName: expandButtonIcon || (isRTL ? 'ChevronLeftMed' : 'ChevronRightMed')\n    }))), onRenderTitle(this.props, this._onRenderTitle), isLoadingVisible && React.createElement(Spinner, {\n      label: loadingText\n    })));\n  };\n\n  GroupHeaderBase.prototype._defaultCheckboxRender = function (checkboxProps) {\n    return React.createElement(Check, {\n      checked: checkboxProps.checked\n    });\n  };\n\n  GroupHeaderBase.prototype._fastDefaultCheckboxRender = function (checkboxProps) {\n    return React.createElement(FastCheck, {\n      theme: checkboxProps.theme,\n      checked: checkboxProps.checked\n    });\n  };\n\n  GroupHeaderBase.defaultProps = {\n    expandButtonProps: {\n      'aria-label': 'expand collapse group'\n    }\n  };\n  return GroupHeaderBase;\n}(React.Component);\n\nexport { GroupHeaderBase };\nvar FastCheck = React.memo(function (props) {\n  return React.createElement(Check, {\n    theme: props.theme,\n    checked: props.checked,\n    className: props.className,\n    useFastIcons: true\n  });\n});","map":{"version":3,"mappings":"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","names":["React","composeRenderFunction","classNamesFunction","getRTL","getRTLSafeKeyCode","KeyCodes","SelectionMode","Check","Icon","GroupSpacer","Spinner","getClassNames","__extends","props","_super","_this","group","onToggleCollapse","isGroupLoading","newCollapsed","isCollapsed","newLoadingVisible","setState","isLoadingVisible","ev","onGroupHeaderKeyUp","defaultPrevented","shouldOpen","state","which","right","theme","shouldClose","left","_toggleCollapse","stopPropagation","preventDefault","onToggleSelectGroup","onGroupHeaderClick","ariaColSpan","className","_classNames","title","role","name","headerCount","count","hasMoreData","GroupHeaderBase","nextProps","previousState","_b","groupLevel","viewport","selectionMode","loadingText","_c","isSelected","_d","selected","indentWidth","_e","onRenderTitle","onRenderGroupHeaderCheckbox","_f","isCollapsedGroupSelectVisible","expandButtonProps","expandButtonIcon","selectAllButtonProps","styles","compact","ariaPosInSet","ariaSetSize","useFastIcons","defaultCheckboxRender","_fastDefaultCheckboxRender","_defaultCheckboxRender","onRenderCheckbox","canSelectGroup","multiple","isSelectionCheckVisible","currentlySelected","isRTL","root","style","minWidth","width","onClick","_onHeaderClick","onKeyUp","_onKeyUp","ariaLabel","groupHeaderContainer","type","check","_onToggleSelectGroupClick","checked","none","dropIcon","iconName","expand","_onToggleClick","expandIsCollapsed","_onRenderTitle","label","checkboxProps","FastCheck","Component","memo"],"sources":["D:\\PFCJACOBO\\PFC\\mycinemalist\\node_modules\\office-ui-fabric-react\\lib\\components\\src\\components\\GroupedList\\GroupHeader.base.tsx"],"sourcesContent":["import * as React from 'react';\nimport { IProcessedStyleSet, ITheme } from '../../Styling';\nimport { composeRenderFunction, classNamesFunction, getRTL, getRTLSafeKeyCode, KeyCodes } from '../../Utilities';\nimport { SelectionMode } from '../../utilities/selection/index';\nimport { Check } from '../../Check';\nimport { Icon } from '../../Icon';\nimport { GroupSpacer } from './GroupSpacer';\nimport { Spinner } from '../../Spinner';\nimport {\n  IGroupHeaderStyleProps,\n  IGroupHeaderStyles,\n  IGroupHeaderProps,\n  IGroupHeaderCheckboxProps,\n} from './GroupHeader.types';\n\nconst getClassNames = classNamesFunction<IGroupHeaderStyleProps, IGroupHeaderStyles>();\n\nexport interface IGroupHeaderState {\n  isCollapsed: boolean;\n  isLoadingVisible: boolean;\n}\n\nexport class GroupHeaderBase extends React.Component<IGroupHeaderProps, IGroupHeaderState> {\n  public static defaultProps: IGroupHeaderProps = {\n    expandButtonProps: { 'aria-label': 'expand collapse group' },\n  };\n\n  private _classNames: IProcessedStyleSet<IGroupHeaderStyles>;\n\n  public static getDerivedStateFromProps(\n    nextProps: IGroupHeaderProps,\n    previousState: IGroupHeaderState,\n  ): IGroupHeaderState {\n    if (nextProps.group) {\n      const newCollapsed = nextProps.group.isCollapsed;\n      const isGroupLoading = nextProps.isGroupLoading;\n      const newLoadingVisible = !newCollapsed && isGroupLoading && isGroupLoading(nextProps.group);\n\n      return {\n        ...previousState,\n        isCollapsed: newCollapsed || false,\n        isLoadingVisible: newLoadingVisible || false,\n      };\n    }\n\n    return previousState;\n  }\n\n  constructor(props: IGroupHeaderProps) {\n    super(props);\n\n    this.state = {\n      isCollapsed: (this.props.group && this.props.group.isCollapsed) as boolean,\n      isLoadingVisible: false,\n    };\n  }\n\n  public render(): JSX.Element | null {\n    const {\n      group,\n      groupLevel = 0,\n      viewport,\n      selectionMode,\n      loadingText,\n      // eslint-disable-next-line deprecation/deprecation\n      isSelected = false,\n      selected = false,\n      indentWidth,\n      onRenderTitle = this._onRenderTitle,\n      onRenderGroupHeaderCheckbox,\n      isCollapsedGroupSelectVisible = true,\n      expandButtonProps,\n      expandButtonIcon,\n      selectAllButtonProps,\n      theme,\n      styles,\n      className,\n      compact,\n      ariaPosInSet,\n      ariaSetSize,\n      useFastIcons,\n    } = this.props;\n\n    const defaultCheckboxRender = useFastIcons ? this._fastDefaultCheckboxRender : this._defaultCheckboxRender;\n\n    const onRenderCheckbox = onRenderGroupHeaderCheckbox\n      ? composeRenderFunction(onRenderGroupHeaderCheckbox, defaultCheckboxRender)\n      : defaultCheckboxRender;\n\n    const { isCollapsed, isLoadingVisible } = this.state;\n\n    const canSelectGroup = selectionMode === SelectionMode.multiple;\n    const isSelectionCheckVisible = canSelectGroup && (isCollapsedGroupSelectVisible || !(group && group.isCollapsed));\n    const currentlySelected = selected || isSelected;\n\n    const isRTL = getRTL(theme);\n\n    this._classNames = getClassNames(styles, {\n      theme: theme!,\n      className,\n      selected: currentlySelected,\n      isCollapsed,\n      compact,\n    });\n\n    if (!group) {\n      return null;\n    }\n    return (\n      <div\n        className={this._classNames.root}\n        style={viewport ? { minWidth: viewport.width } : {}}\n        onClick={this._onHeaderClick}\n        role=\"row\"\n        aria-setsize={ariaSetSize}\n        aria-posinset={ariaPosInSet}\n        data-is-focusable={true}\n        onKeyUp={this._onKeyUp}\n        aria-label={group.ariaLabel || group.name}\n        aria-expanded={!this.state.isCollapsed}\n        aria-level={groupLevel + 1}\n      >\n        <div className={this._classNames.groupHeaderContainer} role=\"presentation\">\n          {isSelectionCheckVisible ? (\n            <div role=\"gridcell\">\n              <button\n                data-is-focusable={false}\n                type=\"button\"\n                className={this._classNames.check}\n                role=\"checkbox\"\n                aria-checked={currentlySelected}\n                data-selection-toggle={true}\n                onClick={this._onToggleSelectGroupClick}\n                {...selectAllButtonProps}\n              >\n                {onRenderCheckbox({ checked: currentlySelected, theme }, onRenderCheckbox)}\n              </button>\n            </div>\n          ) : (\n            selectionMode !== SelectionMode.none && <GroupSpacer indentWidth={indentWidth} count={1} />\n          )}\n\n          <GroupSpacer indentWidth={indentWidth} count={groupLevel!} />\n\n          <div className={this._classNames.dropIcon} role=\"presentation\">\n            <Icon iconName=\"Tag\" />\n          </div>\n          <div role=\"gridcell\">\n            <button\n              data-is-focusable={false}\n              type=\"button\"\n              className={this._classNames.expand}\n              onClick={this._onToggleClick}\n              aria-expanded={!this.state.isCollapsed}\n              {...expandButtonProps}\n            >\n              <Icon\n                className={this._classNames.expandIsCollapsed}\n                iconName={expandButtonIcon || (isRTL ? 'ChevronLeftMed' : 'ChevronRightMed')}\n              />\n            </button>\n          </div>\n\n          {onRenderTitle(this.props, this._onRenderTitle)}\n          {isLoadingVisible && <Spinner label={loadingText} />}\n        </div>\n      </div>\n    );\n  }\n\n  private _toggleCollapse = () => {\n    const { group, onToggleCollapse, isGroupLoading } = this.props;\n    const { isCollapsed } = this.state;\n\n    const newCollapsed = !isCollapsed;\n    const newLoadingVisible = !newCollapsed && isGroupLoading && isGroupLoading(group!);\n\n    this.setState({\n      isCollapsed: newCollapsed,\n      isLoadingVisible: newLoadingVisible as boolean,\n    });\n    if (onToggleCollapse) {\n      onToggleCollapse(group!);\n    }\n  };\n\n  private _onKeyUp = (ev: React.KeyboardEvent<HTMLElement>): void => {\n    const { group, onGroupHeaderKeyUp } = this.props;\n\n    if (onGroupHeaderKeyUp) {\n      onGroupHeaderKeyUp(ev, group!);\n    }\n\n    if (!ev.defaultPrevented) {\n      const shouldOpen = this.state.isCollapsed && ev.which === getRTLSafeKeyCode(KeyCodes.right, this.props.theme);\n      const shouldClose = !this.state.isCollapsed && ev.which === getRTLSafeKeyCode(KeyCodes.left, this.props.theme);\n      if (shouldClose || shouldOpen) {\n        this._toggleCollapse();\n        ev.stopPropagation();\n        ev.preventDefault();\n      }\n    }\n  };\n\n  private _onToggleClick = (ev: React.MouseEvent<HTMLElement>): void => {\n    this._toggleCollapse();\n    ev.stopPropagation();\n    ev.preventDefault();\n  };\n\n  private _onToggleSelectGroupClick = (ev: React.MouseEvent<HTMLElement>): void => {\n    const { onToggleSelectGroup, group } = this.props;\n\n    if (onToggleSelectGroup) {\n      onToggleSelectGroup(group!);\n    }\n\n    ev.preventDefault();\n    ev.stopPropagation();\n  };\n\n  private _onHeaderClick = (): void => {\n    const { group, onGroupHeaderClick, onToggleSelectGroup } = this.props;\n\n    if (onGroupHeaderClick) {\n      onGroupHeaderClick(group!);\n    } else if (onToggleSelectGroup) {\n      onToggleSelectGroup(group!);\n    }\n  };\n\n  private _defaultCheckboxRender(checkboxProps: IGroupHeaderCheckboxProps) {\n    return <Check checked={checkboxProps.checked} />;\n  }\n\n  private _fastDefaultCheckboxRender(checkboxProps: IGroupHeaderCheckboxProps) {\n    return <FastCheck theme={checkboxProps.theme} checked={checkboxProps.checked} />;\n  }\n\n  private _onRenderTitle = (props: IGroupHeaderProps): JSX.Element | null => {\n    const { group, ariaColSpan } = props;\n\n    if (!group) {\n      return null;\n    }\n\n    return (\n      <div className={this._classNames.title} role=\"gridcell\" aria-colspan={ariaColSpan}>\n        <span>{group.name}</span>\n        {\n          // hasMoreData flag is set when grouping is throttled by SPO server which in turn resorts to regular\n          // sorting to simulate grouping behaviors, in which case group count is the number of items returned\n          // so far. That's the reason we need to use \"+\" to show we might have more items than count\n          // indicates.\n        }\n        <span className={this._classNames.headerCount}>\n          ({group.count}\n          {group.hasMoreData && '+'})\n        </span>\n      </div>\n    );\n  };\n}\n\nconst FastCheck = React.memo((props: { theme?: ITheme; checked?: boolean; className?: string }) => {\n  return <Check theme={props.theme} checked={props.checked} className={props.className} useFastIcons />;\n});\n"]},"metadata":{},"sourceType":"module"}