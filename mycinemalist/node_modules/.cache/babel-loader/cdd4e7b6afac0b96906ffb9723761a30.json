{"ast":null,"code":"var _jsxFileName = \"D:\\\\PFCJACOBO\\\\PFC\\\\mycinemalist\\\\src\\\\components\\\\Suggestions.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Button, CircularProgress } from \"@material-ui/core\";\nimport { Callout, DefaultButton, getIconClassName, mergeStyleSets, Stack, TextField } from \"office-ui-fabric-react\";\nimport * as $ from 'jquery';\nimport { Suggestion } from \"../common/Suggestion\";\nimport ReactDOM from \"react-dom\";\nimport commonStyles from \"../common/common.module.scss\";\nimport 'datatables.net';\nimport 'datatables.net-responsive';\nimport 'datatables.net-buttons';\nimport 'datatables.net-select';\nimport 'datatables.net-buttons/js/buttons.html5';\nimport 'datatables.net-buttons/js/buttons.print';\nimport FormSugg from \"./FormSugg\";\n\nfunction Suggestions(props) {\n  _s();\n\n  const [loading, setLoading] = useState(true);\n  const [isOpenCallout, setIsOpenCallout] = useState(false);\n  const [dataLoaded, setDataLoaded] = useState(false);\n  const [targetTitle, setTargetTitle] = useState(\"\");\n  const [data, setData] = useState({});\n  const tableSugg = useRef(); // const table =null;\n\n  const dataSuggestions = {};\n  useEffect(() => {\n    setLoading(true);\n    console.log(props);\n    setTimeout(() => {\n      initSugg();\n    }, 100);\n  }, []);\n  useEffect(() => {\n    setTimeout(() => {\n      setLoading(false);\n    }, 500);\n  }, [loading]);\n  useEffect(() => {\n    if (Object.keys(data).length > 0 && !dataLoaded) {\n      fillTableSugg();\n      setDataLoaded(true);\n    }\n  }, [data]);\n\n  const initSugg = async () => {\n    mountTableSugg();\n    let suggestions;\n\n    try {\n      const suggest = await fetch(`http://localhost:8080/getAllSugg.php`, {\n        mode: \"cors\"\n      });\n      suggestions = await suggest.json();\n      console.log(suggestions);\n    } catch (error) {\n      console.log(error); // Manage error codes\n    }\n\n    var data = {};\n    suggestions.map(item => {\n      var suggestion = new Suggestion(item);\n      console.log(suggestion);\n      dataSuggestions[suggestion.title] = suggestion;\n      return true;\n    });\n    setData(dataSuggestions); // setLoading(false);\n  };\n\n  const fillTableSugg = () => {\n    console.log(\"llenar\");\n    let suggRow = [];\n    $.each(data, function (idx, listItem) {\n      let id = listItem.title.split(/\\s/).join('');\n      console.log(id);\n      suggRow.push([listItem.title, `<span  id='${id}' title='${listItem.title}'>${listItem.title}<span>`, `<span title='${listItem.platform}'>${listItem.platform}<span>`, `<span title='${listItem.year}'>${listItem.year}<span>`, \"\"]);\n    });\n    console.log(suggRow);\n    tableSugg.current.rows.add(suggRow).draw();\n    tableSugg.current.draw();\n    tableSugg.current.responsive.recalc();\n    tableSugg.current.columns.adjust().draw();\n  };\n\n  const geticonoSiguiente = () => {\n    return `<i class=\"${getIconClassName(\"ChevronRightSmall\")}\" />`;\n  };\n\n  const geticonoAnterior = () => {\n    return `<i class=\"${getIconClassName(\"ChevronLeftSmall\")}\" />`;\n  };\n\n  const mountTableSugg = () => {\n    var siguiente = geticonoSiguiente();\n    var anterior = geticonoAnterior(); // Meter iconos de material ui\n    // this.renderIcons();\n\n    $.extend($.fn.dataTable.defaults, {\n      responsive: true\n    });\n    $.extend($.fn.dataTableExt.oSort, {\n      \"date-eu-asc\": function (a, b) {\n        if (a === \"\") return 1;else if (b === \"\") return -1;else {\n          var aDay = a.split(\"/\")[0];\n          var aMonth = a.split(\"/\")[1];\n          var aYear = a.split(\"/\")[2];\n          a = new Date(aMonth + \"/\" + aDay + \"/\" + aYear).getTime();\n          var bDay = b.split(\"/\")[0];\n          var bMonth = b.split(\"/\")[1];\n          var bYear = b.split(\"/\")[2];\n          b = new Date(bMonth + \"/\" + bDay + \"/\" + bYear).getTime();\n          return a < b ? -1 : a > b ? 1 : 0;\n        }\n      },\n      \"date-eu-desc\": function (a, b) {\n        if (a === \"\") return 1;else if (b === \"\") return -1;else {\n          var aDay = a.split(\"/\")[0];\n          var aMonth = a.split(\"/\")[1];\n          var aYear = a.split(\"/\")[2];\n          a = new Date(aMonth + \"/\" + aDay + \"/\" + aYear).getTime();\n          var bDay = b.split(\"/\")[0];\n          var bMonth = b.split(\"/\")[1];\n          var bYear = b.split(\"/\")[2];\n          b = new Date(bMonth + \"/\" + bDay + \"/\" + bYear).getTime();\n          return a < b ? 1 : a > b ? -1 : 0;\n        }\n      }\n    });\n    tableSugg.current = $(\"#SuggTable\").DataTable({\n      info: true,\n      pagingType: \"simple\",\n      deferRender: true,\n      dom: \"Brtip\",\n      order: [[1, \"desc\"]],\n      scrollX: false,\n      responsive: {\n        details: {\n          type: \"column\",\n          target: -1\n        }\n      },\n      buttons: [],\n      // lengthMenu: [[1, 2, 3, -1], [10, 25, 50, \"All\"]],\n      columnDefs: [{\n        className: \"control\",\n        orderable: false,\n        targets: -1\n      }, {\n        targets: [1, 2, 3],\n        width: \"300px\"\n      }, {\n        className: \"Botones\",\n        width: \"1%\",\n        targets: 0\n      }, {\n        targets: 0,\n        visible: false\n      }],\n      createdRow: (row, data, dataIndex, cells) => {// RenderizarTR(cells, data[0]);\n      },\n      language: {\n        decimal: \"\",\n        emptyTable: \"Sin datos\",\n        info: \"_START_ - _END_ (_TOTAL_ en total)\",\n        infoEmpty: \"0 - 0 (0 en total)\",\n        infoFiltered: \"(filtrados de _MAX_ registros totales)\",\n        infoPostFix: \"\",\n        thousands: \",\",\n        lengthMenu: \"Mostrar _MENU_\",\n        loadingRecords: \"Cargando...\",\n        processing: \"Procesando...\",\n        search: \"Búsqueda:\",\n        zeroRecords: \"Sin resultados\",\n        paginate: {\n          first: \"Primero\",\n          last: \"Último\",\n          next: siguiente,\n          previous: anterior\n        },\n        aria: {\n          sortAscending: \": activar para ordenar ascendente\",\n          sortDescending: \": activar para ordenar descendente\"\n        },\n        bAutoWidth: false\n      }\n    });\n    $(\"#SuggTable\").on(\"click\", \"tr\", async function () {\n      let id = $(this).children(0)[0].childNodes[0].attributes.title.value;\n      let title = id.split(/\\s/).join('');\n      setTargetTitle(id);\n      setIsOpenCallout(true);\n    });\n    setTimeout(() => {\n      tableSugg.current.responsive.recalc();\n      tableSugg.current.columns.adjust().draw();\n    }, 100);\n  };\n\n  const newSuggestion = async (admin, title) => {\n    console.log(title);\n    console.log(data);\n    let suggestion = data[title];\n    console.log(suggestion);\n    var Formulario;\n\n    async function SubmitForm(suggest) {\n      if (title) {} else {\n        const util = JSON.stringify(suggest);\n        const respuesta = await fetch(`http://localhost:8080/newSuggestion.php`, {\n          mode: 'cors',\n          method: \"POST\",\n          body: util\n        }); //   push a bbdd\n\n        const succes = await respuesta.json();\n        console.log(succes);\n\n        if (succes) {}\n\n        setTimeout(() => {\n          updateTable(suggest.title);\n        }, 1100); // añadir la sugerencia a tabla e item\n      }\n\n      return true;\n    }\n\n    Formulario = /*#__PURE__*/React.createElement(FormSugg, {\n      submit: SubmitForm.bind(this),\n      sugg: suggestion,\n      context: props.context,\n      admin: admin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 13\n      }\n    });\n    let container = document.createElement(\"div\");\n    document.body.appendChild(container);\n    ReactDOM.render(Formulario, container);\n  };\n\n  const updateTable = async title => {\n    let sugg; // console.log(suggest);\n\n    const suggestion = await fetch(`http://localhost:8080/getSuggestion.php?title=${title}`, {\n      mode: \"cors\"\n    });\n    sugg = await suggestion.json();\n    console.log(sugg);\n    let newRow = createNewSugg(sugg);\n    tableSugg.current.rows.add(newRow);\n    tableSugg.current.draw();\n    tableSugg.current.responsive.recalc();\n    tableSugg.current.columns.adjust().draw();\n  };\n\n  const createNewSugg = sugg => {\n    let newSugg = new Suggestion(sugg);\n    console.log(newSugg);\n    data[newSugg.title] = newSugg;\n    return [[newSugg.title, `<span title='${newSugg.title}'>${newSugg.title}<span>`, `<span title='${newSugg.platform}'>${newSugg.platform}<span>`, `<span title='${newSugg.year}'>${newSugg.year}<span>`, \"\"]];\n  };\n\n  const deleteSuggestion = async title => {\n    let sugg = data[title];\n    const respuesta = await fetch(`http://localhost:8080/delSuggestion.php?id=${sugg.id}`, {\n      method: \"DELETE\"\n    });\n    const succes = await respuesta.json(); //   setSnackMessage(\"Favorito eliminado\");\n\n    var indexes = tableSugg.current.rows().indexes().filter((value, index) => {\n      return sugg.title === tableSugg.current.row(value).data()[0];\n    });\n    tableSugg.current.rows(indexes).remove().draw();\n    tableSugg.current.draw();\n  };\n\n  const styles = mergeStyleSets({\n    callout: {\n      width: 220,\n      padding: '15px 15px'\n    }\n  }); // if (loading) return <Stack\n  //     style={{ width: \"100%\", marginTop: \"150px\" }}\n  //     horizontal\n  //     horizontalAlign='center'><CircularProgress color=\"inherit\" size=\"100px\" /></Stack>\n  //     ;\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Stack, {\n    style: {\n      width: \"100%\",\n      display: loading ? \"block\" : \"none\",\n      margin: \"100px 45% 0% 45%\"\n    },\n    horizontal: true,\n    horizontalAlign: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"inherit\",\n    size: \"100px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Stack, {\n    className: commonStyles.espacioTabs,\n    id: \"SuggStack\",\n    style: {\n      width: \"100%\",\n      marginTop: \"5px\",\n      display: loading ? \"none\" : \"block\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    styles: {\n      root: {\n        width: \"100%\",\n        marginBottom: \"25px\"\n      }\n    },\n    verticalAlign: 'center',\n    horizontalAlign: 'end',\n    tokens: {\n      childrenGap: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DefaultButton, {\n    text: \"Nueva sugerencia\",\n    onClick: () => {\n      newSuggestion(false, null);\n    },\n    allowDisabledFocus: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Stack, {\n    styles: {\n      root: {\n        width: \"30%\"\n      }\n    },\n    horizontalAlign: 'end',\n    wrap: true,\n    verticalAlign: \"end\",\n    horizontal: true,\n    tokens: {\n      childrenGap: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    grow: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    placeholder: \"B\\xFAsqueda\",\n    height: 10,\n    iconProps: {\n      iconName: 'Search'\n    },\n    style: {\n      width: '100%'\n    },\n    onChange: (event, newValue) => {\n      tableSugg.current.search(newValue).draw();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"divTableSugg\",\n    style: {\n      width: \"100%\",\n      padding: \"0px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    style: {\n      width: \"100%\"\n    },\n    className: \"display table table-striped\",\n    id: \"SuggTable\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 33\n    }\n  }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 33\n    }\n  }, \"Titulo\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 33\n    }\n  }, \"Plataforma\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 33\n    }\n  }, \"A\\xF1o\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 33\n    }\n  }, \"Mas...\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    id: \"SuggTableBody\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 25\n    }\n  })))), isOpenCallout && props.user.isAdmin && /*#__PURE__*/React.createElement(Callout, {\n    className: styles.callout,\n    role: \"dialog\",\n    gapSpace: 0,\n    target: `#${targetTitle.split(/\\s/).join('')}`,\n    onDismiss: () => {\n      setIsOpenCallout(false);\n    },\n    setInitialFocus: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    horizontal: true,\n    style: {\n      width: \"100%\"\n    },\n    horizontalAlign: \"space-around\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      border: \"1px solid black\",\n      backgroundColor: \"black\",\n      color: \"white\",\n      fontSize: \"10px\"\n    },\n    onClick: () => {\n      newSuggestion(true, targetTitle);\n      setIsOpenCallout(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 21\n    }\n  }, \"Completar\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      setIsOpenCallout(false);\n      deleteSuggestion(targetTitle);\n    },\n    style: {\n      border: \"1px solid black\",\n      fontSize: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 26\n    }\n  }, \"Borrar\"))));\n}\n\n_s(Suggestions, \"T18H3dJfeYF59cSYVxqP6p5rKQY=\");\n\n_c = Suggestions;\nexport default Suggestions;\n\nvar _c;\n\n$RefreshReg$(_c, \"Suggestions\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Button","CircularProgress","Callout","DefaultButton","getIconClassName","mergeStyleSets","Stack","TextField","$","Suggestion","ReactDOM","commonStyles","FormSugg","Suggestions","props","loading","setLoading","isOpenCallout","setIsOpenCallout","dataLoaded","setDataLoaded","targetTitle","setTargetTitle","data","setData","tableSugg","dataSuggestions","console","log","setTimeout","initSugg","Object","keys","length","fillTableSugg","mountTableSugg","suggestions","suggest","fetch","mode","json","error","map","item","suggestion","title","suggRow","each","idx","listItem","id","split","join","push","platform","year","current","rows","add","draw","responsive","recalc","columns","adjust","geticonoSiguiente","geticonoAnterior","siguiente","anterior","extend","fn","dataTable","defaults","dataTableExt","oSort","a","b","aDay","aMonth","aYear","Date","getTime","bDay","bMonth","bYear","DataTable","info","pagingType","deferRender","dom","order","scrollX","details","type","target","buttons","columnDefs","className","orderable","targets","width","visible","createdRow","row","dataIndex","cells","language","decimal","emptyTable","infoEmpty","infoFiltered","infoPostFix","thousands","lengthMenu","loadingRecords","processing","search","zeroRecords","paginate","first","last","next","previous","aria","sortAscending","sortDescending","bAutoWidth","on","children","childNodes","attributes","value","newSuggestion","admin","Formulario","SubmitForm","util","JSON","stringify","respuesta","method","body","succes","updateTable","bind","context","container","document","createElement","appendChild","render","sugg","newRow","createNewSugg","newSugg","deleteSuggestion","indexes","filter","index","remove","styles","callout","padding","display","margin","espacioTabs","marginTop","root","marginBottom","childrenGap","iconName","event","newValue","user","isAdmin","border","backgroundColor","color","fontSize"],"sources":["D:/PFCJACOBO/PFC/mycinemalist/src/components/Suggestions.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\n\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { User } from \"../common/User\";\r\nimport { Content } from \"../common/Content\";\r\nimport ContentCard from \"./ContentCard\";\r\nimport { getLeadingCommentRanges } from \"typescript\";\r\nimport { common } from \"@material-ui/core/colors\";\r\nimport NewComment from \"./NewComment\";\r\nimport { Button, CircularProgress } from \"@material-ui/core\";\r\nimport { Callout, DefaultButton, getIconClassName, IconButton, mergeStyleSets, Stack, TextField } from \"office-ui-fabric-react\";\r\nimport * as $ from 'jquery';\r\nimport { Suggestion } from \"../common/Suggestion\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport commonStyles from \"../common/common.module.scss\";\r\nimport 'datatables.net';\r\nimport 'datatables.net-responsive';\r\nimport 'datatables.net-buttons';\r\nimport 'datatables.net-select';\r\nimport 'datatables.net-buttons/js/buttons.html5';\r\nimport 'datatables.net-buttons/js/buttons.print';\r\nimport FormSugg from \"./FormSugg\";\r\nimport { Console } from \"console\";\r\n\r\n\r\nfunction Suggestions(props) {\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const [isOpenCallout, setIsOpenCallout] = useState(false);\r\n    const [dataLoaded, setDataLoaded] = useState(false);\r\n\r\n    const [targetTitle, setTargetTitle] = useState(\"\");\r\n\r\n\r\n    const [data, setData] = useState({})\r\n\r\n    const tableSugg = useRef<any>();\r\n    // const table =null;\r\n    const dataSuggestions: {\r\n        [key: string]: Suggestion;\r\n    } = {};\r\n\r\n    useEffect(() => {\r\n        setLoading(true);\r\n        console.log(props);\r\n        setTimeout(() => {\r\n            initSugg();\r\n        }, 100);\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            setLoading(false);\r\n        }, 500);\r\n    }, [loading])\r\n    \r\n    useEffect(() => {\r\n        if(Object.keys(data).length>0 && !dataLoaded){\r\n            fillTableSugg();\r\n            setDataLoaded(true);\r\n        }\r\n\r\n    }, [data])\r\n\r\n    const initSugg = async () => {\r\n        mountTableSugg();\r\n        let suggestions;\r\n        try {\r\n            const suggest = await fetch(`http://localhost:8080/getAllSugg.php`, {\r\n                mode: \"cors\",\r\n            });\r\n            suggestions = await suggest.json();\r\n            console.log(suggestions);\r\n        } catch (error) {\r\n            console.log(error);\r\n            // Manage error codes\r\n        }\r\n        var data = {};\r\n        suggestions.map((item) => {\r\n            var suggestion = new Suggestion(item);\r\n            console.log(suggestion);\r\n            dataSuggestions[suggestion.title] = suggestion;\r\n            return true;\r\n        });\r\n        setData(dataSuggestions);\r\n        // setLoading(false);\r\n\r\n    }\r\n\r\n    const fillTableSugg = () => {\r\n        console.log(\"llenar\");\r\n        let suggRow = [];\r\n        $.each(data, function (idx, listItem) {\r\n            let id = (listItem.title).split(/\\s/).join('');\r\n            console.log(id);\r\n            suggRow.push([\r\n                listItem.title,\r\n                `<span  id='${id}' title='${listItem.title}'>${listItem.title}<span>`,\r\n                `<span title='${listItem.platform}'>${listItem.platform}<span>`,\r\n                `<span title='${listItem.year}'>${listItem.year}<span>`,\r\n                \"\",\r\n            ]);\r\n        });\r\n        console.log(suggRow);\r\n        tableSugg.current.rows.add(suggRow).draw();\r\n        tableSugg.current.draw();\r\n        tableSugg.current.responsive.recalc();\r\n        tableSugg.current.columns.adjust().draw();\r\n    }\r\n\r\n    const geticonoSiguiente = () => {\r\n        return `<i class=\"${getIconClassName(\"ChevronRightSmall\")}\" />`;\r\n    }\r\n    const geticonoAnterior = () => {\r\n        return `<i class=\"${getIconClassName(\"ChevronLeftSmall\")}\" />`;\r\n    }\r\n    const mountTableSugg = () => {\r\n        var siguiente = geticonoSiguiente();\r\n        var anterior = geticonoAnterior();\r\n        // Meter iconos de material ui\r\n        // this.renderIcons();\r\n        $.extend($.fn.dataTable.defaults, {\r\n            responsive: true,\r\n        });\r\n        $.extend($.fn.dataTableExt.oSort, {\r\n            \"date-eu-asc\": function (a, b) {\r\n                if (a === \"\") return 1;\r\n                else if (b === \"\") return -1;\r\n                else {\r\n                    var aDay = a.split(\"/\")[0];\r\n                    var aMonth = a.split(\"/\")[1];\r\n                    var aYear = a.split(\"/\")[2];\r\n                    a = new Date(aMonth + \"/\" + aDay + \"/\" + aYear).getTime();\r\n\r\n                    var bDay = b.split(\"/\")[0];\r\n                    var bMonth = b.split(\"/\")[1];\r\n                    var bYear = b.split(\"/\")[2];\r\n                    b = new Date(bMonth + \"/\" + bDay + \"/\" + bYear).getTime();\r\n\r\n                    return a < b ? -1 : a > b ? 1 : 0;\r\n                }\r\n            },\r\n\r\n            \"date-eu-desc\": function (a, b) {\r\n                if (a === \"\") return 1;\r\n                else if (b === \"\") return -1;\r\n                else {\r\n                    var aDay = a.split(\"/\")[0];\r\n                    var aMonth = a.split(\"/\")[1];\r\n                    var aYear = a.split(\"/\")[2];\r\n                    a = new Date(aMonth + \"/\" + aDay + \"/\" + aYear).getTime();\r\n\r\n                    var bDay = b.split(\"/\")[0];\r\n                    var bMonth = b.split(\"/\")[1];\r\n                    var bYear = b.split(\"/\")[2];\r\n                    b = new Date(bMonth + \"/\" + bDay + \"/\" + bYear).getTime();\r\n\r\n                    return a < b ? 1 : a > b ? -1 : 0;\r\n                }\r\n            },\r\n        });\r\n\r\n        tableSugg.current = $(\"#SuggTable\").DataTable({\r\n            info: true,\r\n            pagingType: \"simple\",\r\n            deferRender: true,\r\n            dom: \"Brtip\",\r\n            order: [[1, \"desc\"]],\r\n            scrollX: false,\r\n            responsive: {\r\n                details: {\r\n                    type: \"column\",\r\n                    target: -1,\r\n                },\r\n            },\r\n\r\n            buttons: [],\r\n            // lengthMenu: [[1, 2, 3, -1], [10, 25, 50, \"All\"]],\r\n            columnDefs: [\r\n                {\r\n                    className: \"control\",\r\n                    orderable: false,\r\n                    targets: -1,\r\n                },\r\n                {\r\n                    targets: [1, 2, 3],\r\n                    width: \"300px\"\r\n                },\r\n                {\r\n                    className: \"Botones\",\r\n                    width: \"1%\",\r\n                    targets: 0\r\n                },\r\n                {\r\n                    targets: 0,\r\n                    visible: false,\r\n                },\r\n            ],\r\n            createdRow: (row, data, dataIndex, cells) => {\r\n                // RenderizarTR(cells, data[0]);\r\n            },\r\n            language: {\r\n                decimal: \"\",\r\n                emptyTable: \"Sin datos\",\r\n                info: \"_START_ - _END_ (_TOTAL_ en total)\",\r\n                infoEmpty: \"0 - 0 (0 en total)\",\r\n                infoFiltered: \"(filtrados de _MAX_ registros totales)\",\r\n                infoPostFix: \"\",\r\n                thousands: \",\",\r\n                lengthMenu: \"Mostrar _MENU_\",\r\n                loadingRecords: \"Cargando...\",\r\n                processing: \"Procesando...\",\r\n                search: \"Búsqueda:\",\r\n                zeroRecords: \"Sin resultados\",\r\n                paginate: {\r\n                    first: \"Primero\",\r\n                    last: \"Último\",\r\n                    next: siguiente,\r\n                    previous: anterior,\r\n                },\r\n                aria: {\r\n                    sortAscending: \": activar para ordenar ascendente\",\r\n                    sortDescending: \": activar para ordenar descendente\",\r\n                },\r\n                bAutoWidth: false,\r\n            },\r\n        });\r\n        $(\"#SuggTable\").on(\"click\", \"tr\", async function () {\r\n            let id = $(this).children(0)[0].childNodes[0].attributes.title.value;\r\n            let title = id.split(/\\s/).join('');\r\n\r\n            setTargetTitle(id);\r\n            setIsOpenCallout(true);\r\n\r\n        });\r\n        setTimeout(() => {\r\n            tableSugg.current.responsive.recalc();\r\n            tableSugg.current.columns.adjust().draw();\r\n        }, 100);\r\n    }\r\n\r\n\r\n    const newSuggestion = async (admin,title) => {\r\n        console.log(title);\r\n        console.log(data);\r\n        let suggestion = data[title];\r\n        console.log(suggestion);\r\n        var Formulario;\r\n\r\n        async function SubmitForm(\r\n            suggest: any,\r\n        ) {\r\n            if(title){\r\n\r\n            }else{\r\n                const util = JSON.stringify(suggest);\r\n\r\n                const respuesta = await fetch(`http://localhost:8080/newSuggestion.php`, {\r\n                    mode: 'cors',\r\n                    method: \"POST\",\r\n                    body: util,\r\n                });\r\n                //   push a bbdd\r\n                const succes = await respuesta.json();\r\n                console.log(succes);\r\n                if (succes) {\r\n    \r\n                }\r\n                setTimeout(() => {\r\n                    updateTable(suggest.title);\r\n                }, 1100);\r\n    \r\n                // añadir la sugerencia a tabla e item\r\n            }\r\n           \r\n\r\n\r\n            return true;\r\n        }\r\n\r\n        Formulario = (\r\n            <FormSugg\r\n                submit={SubmitForm.bind(this)}\r\n                sugg = {suggestion}\r\n                context={props.context}\r\n                admin={admin}\r\n            ></FormSugg>\r\n        );\r\n\r\n        let container = document.createElement(\"div\");\r\n        document.body.appendChild(container);\r\n        ReactDOM.render(Formulario, container);\r\n    }\r\n\r\n    const updateTable = async (title) => {\r\n        let sugg;\r\n        // console.log(suggest);\r\n        const suggestion = await fetch(`http://localhost:8080/getSuggestion.php?title=${title}`, {\r\n            mode: \"cors\",\r\n        });\r\n        sugg = await suggestion.json();\r\n        console.log(sugg);\r\n        let newRow = createNewSugg(sugg);\r\n        tableSugg.current.rows.add(newRow);\r\n        tableSugg.current.draw();\r\n        tableSugg.current.responsive.recalc();\r\n        tableSugg.current.columns.adjust().draw();\r\n    }\r\n\r\n    const createNewSugg = (sugg) => {\r\n        let newSugg = new Suggestion(sugg);\r\n        console.log(newSugg);\r\n        data[newSugg.title] = newSugg;\r\n\r\n        return [\r\n            [\r\n                newSugg.title,\r\n                `<span title='${newSugg.title}'>${newSugg.title}<span>`,\r\n                `<span title='${newSugg.platform}'>${newSugg.platform}<span>`,\r\n                `<span title='${newSugg.year}'>${newSugg.year}<span>`,\r\n                \"\",\r\n            ],\r\n        ];\r\n    }\r\n    const deleteSuggestion = async (title) =>{\r\n\r\n        let sugg = data[title];\r\n\r\n        const respuesta = await fetch(`http://localhost:8080/delSuggestion.php?id=${sugg.id}`, {\r\n            method: \"DELETE\",\r\n          });\r\n          const succes = await respuesta.json();\r\n        //   setSnackMessage(\"Favorito eliminado\");\r\n        var indexes = tableSugg.current\r\n        .rows()\r\n        .indexes()\r\n        .filter((value, index) => {\r\n          return sugg.title === tableSugg.current.row(value).data()[0];\r\n        });\r\n        tableSugg.current.rows(indexes).remove().draw();\r\n        tableSugg.current.draw();\r\n        \r\n    }\r\n    const styles = mergeStyleSets({\r\n\r\n        callout: {\r\n            width: 220,\r\n            padding: '15px 15px',\r\n        },\r\n\r\n    });\r\n\r\n    // if (loading) return <Stack\r\n    //     style={{ width: \"100%\", marginTop: \"150px\" }}\r\n    //     horizontal\r\n    //     horizontalAlign='center'><CircularProgress color=\"inherit\" size=\"100px\" /></Stack>\r\n    //     ;\r\n    return (\r\n\r\n        <>\r\n            <Stack\r\n                style={{\r\n                    width: \"100%\",\r\n                    display: loading ? \"block\" : \"none\",\r\n\r\n                    margin: \"100px 45% 0% 45%\"\r\n                }}\r\n                horizontal horizontalAlign='center'>\r\n                <CircularProgress color=\"inherit\" size=\"100px\" />\r\n            </Stack>\r\n            <Stack\r\n                className={commonStyles.espacioTabs}\r\n                id=\"SuggStack\"\r\n                style={{\r\n                    width: \"100%\",\r\n                    marginTop: \"5px\",\r\n                    display: loading ? \"none\" : \"block\",\r\n                }}\r\n            >\r\n                {/* añadir boton nueva sugerencia con  */}\r\n                <Stack styles={{ root: { width: \"100%\", marginBottom: \"25px\" } }} verticalAlign={'center'} horizontalAlign={'end'} tokens={{ childrenGap: 15 }}>\r\n                    <DefaultButton text=\"Nueva sugerencia\" onClick={() => { newSuggestion(false,null); }} allowDisabledFocus />\r\n\r\n                    <Stack styles={{ root: { width: \"30%\" } }} horizontalAlign={'end'} wrap={true} verticalAlign={\"end\"} horizontal tokens={{ childrenGap: 20 }}>\r\n                        <Stack grow>\r\n\r\n                            <TextField placeholder=\"Búsqueda\" height={10} iconProps={{ iconName: 'Search' }} style={{ width: '100%' }} onChange={(event: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>, newValue?: string) => {\r\n                                tableSugg.current.search(newValue).draw();\r\n                            }} />\r\n                        </Stack>\r\n                    </Stack>\r\n                </Stack>\r\n                <div\r\n                    id=\"divTableSugg\"\r\n                    style={{ width: \"100%\", padding: \"0px\" }}\r\n                >\r\n                    <table style={{ width: \"100%\" }} className=\"display table table-striped\" id=\"SuggTable\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>Titulo</th>\r\n                                <th>Plataforma</th>\r\n                                <th>Año</th>\r\n                                <th>Mas...</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody id=\"SuggTableBody\"></tbody>\r\n                    </table>\r\n                </div>\r\n            </Stack>\r\n\r\n            {isOpenCallout && props.user.isAdmin &&\r\n                <Callout\r\n                    className={styles.callout}\r\n                    role=\"dialog\"\r\n                    gapSpace={0}\r\n                    target={`#${targetTitle.split(/\\s/).join('')}`}\r\n                    onDismiss={() => {\r\n                        setIsOpenCallout(false);\r\n                    }}\r\n                    setInitialFocus\r\n                >\r\n                    <Stack\r\n                    horizontal\r\n                    style={{width:\"100%\"}}\r\n                    horizontalAlign=\"space-around\">\r\n                    <Button\r\n                        style={{  border: \"1px solid black\", backgroundColor: \"black\", color: \"white\",fontSize:\"10px\"  }}\r\n                        onClick={() => {\r\n                            newSuggestion(true,targetTitle);\r\n                            setIsOpenCallout(false);\r\n                        }} \r\n                    >\r\n                    Completar\r\n                </Button><Button\r\n                    onClick={() => {\r\n                        setIsOpenCallout(false);\r\n                        deleteSuggestion(targetTitle);\r\n                    }}\r\n                    style={{  border: \"1px solid black\",fontSize:\"10px\" }}>\r\n                        Borrar\r\n                    </Button>\r\n                    </Stack>\r\n               </Callout>\r\n            \r\n                }\r\n                </>\r\n\r\n    );\r\n}\r\n\r\n\r\nexport default Suggestions;"],"mappings":"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"},"metadata":{},"sourceType":"module"}